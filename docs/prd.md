
# PRDï¼šTech Vocabulary Indexï¼ˆç¨‹åºå‘˜æŠ€æœ¯è¯æ±‡å‘éŸ³ç´¢å¼•ï¼‰

ç‰ˆæœ¬ï¼šv0.4
çŠ¶æ€ï¼šMVP
ç›®æ ‡ç”¨æˆ·ï¼šä¸åŒè¯­è¨€èƒŒæ™¯ç¨‹åºå‘˜
æ ¸å¿ƒä»·å€¼ï¼šé¿å…æŠ€æœ¯è¯æ±‡å‘éŸ³é”™è¯¯
åŸåˆ™ï¼šKISS / å»å¤æ‚åº¦ / å¤–åŒ…éæ ¸å¿ƒèƒ½åŠ›

---

## èƒŒæ™¯ä¸é—®é¢˜å®šä¹‰

å¤§é‡ç¨‹åºå‘˜åœ¨ä»¥ä¸‹åœºæ™¯ä¸­å­˜åœ¨é«˜é¢‘å‘éŸ³é”™è¯¯ï¼š

* æŠ€æœ¯äº¤æµï¼ˆé¢è¯• / ä¼šè®® / åˆ†äº«ï¼‰
* è§†é¢‘å­¦ä¹  / æŠ€æœ¯æ’­å®¢
* è‹±æ–‡æŠ€æœ¯æ–‡æ¡£é˜…è¯»åçš„å£å¤´è¡¨è¾¾

é—®é¢˜å¹¶ä¸åœ¨äº"ä¸ä¼šè‹±è¯­"ï¼Œè€Œåœ¨äºï¼š

* æŠ€æœ¯è¯æ±‡å¹¶éæ™®é€šè‹±è¯­ï¼ˆcoroutine / cache / daemon / enumï¼‰
* æŠ€æœ¯æ–‡æ¡£æ˜¯ä¸»è¦è¯æºï¼Œä½†ç¼ºä¹å‘éŸ³æç¤º
* ç¤¾åŒºé•¿æœŸå½¢æˆé”™è¯¯è¯»æ³•å¹¶è¢«ä¼ æ’­

ç°æœ‰è¯å…¸äº§å“ï¼š

* é¢å‘é€šç”¨è‹±è¯­
* ä¸åŒºåˆ†æŠ€æœ¯è¯­å¢ƒ
* ä¸è¦†ç›–å¤§é‡æŠ€æœ¯å‘½åå®ä½“

æœ¬äº§å“ä¸å°è¯•è§£å†³"è‹±è¯­å­¦ä¹ "ï¼Œåªè§£å†³ä¸€ä¸ªé—®é¢˜ï¼š

**è¿™ä¸ªæŠ€æœ¯è¯ï¼Œè¯¥æ€ä¹ˆå¿µã€‚**

---

## äº§å“å®šä½

* å¸¸è§å‘éŸ³å®¹æ˜“é”™è¯¯çš„æŠ€æœ¯è¯æ±‡
* å¿«é€Ÿå¬åˆ°æ­£ç¡®å‘éŸ³
* ç®€æ´çš„è¯æ±‡ç®¡ç†

---

## ç›®æ ‡ä¸éç›®æ ‡

ç›®æ ‡ï¼ˆMVPï¼‰ï¼š

* è¦†ç›–å„ç±»æŠ€æœ¯è¯æ±‡ï¼ˆä¸æŒ‰è¯­è¨€/åˆ†ç±»åŒºåˆ†ï¼‰
* æ”¯æŒæœç´¢
* ç‚¹å‡»å³å¬æƒå¨å‘éŸ³
* æ”¯æŒç®¡ç†å‘˜é«˜æ•ˆç»´æŠ¤è¯åº“

---

## æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨

### å‰å°åŠŸèƒ½ï¼ˆWebï¼‰

#### è¯æ±‡åˆ—è¡¨

* æ”¯æŒåˆ†é¡µæˆ–æ— é™æ»šåŠ¨
* åˆ›å»ºæ—¶é—´é™åº

#### æœç´¢

* æ¨¡ç³ŠåŒ¹é… word / normalized
* å®æ—¶æœç´¢

åˆ—è¡¨ Item æ˜¾ç¤ºå­—æ®µï¼š

* word
* IPA éŸ³æ ‡ï¼ˆé€šç”¨éŸ³ï¼Œä¸åŒºåˆ†è‹±ç¾éŸ³ï¼‰

---

### åå°ç®¡ç†åŠŸèƒ½ï¼ˆWebï¼‰

#### è¯æ±‡ç®¡ç†ï¼ˆCRUDï¼‰

* æ–°å¢ / ç¼–è¾‘ / åˆ é™¤è¯æ¡
* **éŸ³é¢‘é‡æ–°ç”Ÿæˆ**ï¼šä¸€é”®ç”Ÿæˆå¹¶è‡ªåŠ¨ä¿å­˜ï¼ˆé«˜é¢‘æ“ä½œï¼‰
* **ç¼–è¾‘**ï¼šä»…ä¿®æ”¹å•è¯å’ŒéŸ³æ ‡ï¼Œä½é¢‘æ“ä½œ

#### æ‰¹é‡å¯¼å…¥ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

* æ”¯æŒ CSV / JSON / æ–‡æœ¬ç²˜è´´
* ä¸€è¡Œä¸€ä¸ªè¯æˆ–ç»“æ„åŒ–å¯¼å…¥
* å¯¼å…¥æ—¶é€šè¿‡ AI è·å–æ ‡å‡†éŸ³æ ‡å’Œå‘éŸ³ï¼Œä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨

#### æ•°æ®æ ¡éªŒ

* å»é‡ï¼ˆnormalizedï¼‰
* éæ³•å­—ç¬¦è¿‡æ»¤

#### AI è¾…åŠ©å¤„ç†

* è‡ªåŠ¨è·å– IPA éŸ³æ ‡å’Œå‘éŸ³
* ç®¡ç†å‘˜ç¡®è®¤åå†™å…¥

æƒé™è¯´æ˜ï¼š

* ä»…ç®¡ç†å‘˜å¯è®¿é—®åå°
* ä¸å¼€æ”¾æ™®é€šç”¨æˆ·æäº¤

#### ç”¨æˆ·è®¤è¯

* è®¤è¯æ–¹å¼ï¼šSupabase Authï¼ˆé‚®ç®±+å¯†ç ï¼‰
* ç”¨æˆ·ç™»å½•åè·³è½¬åˆ°åå°ç®¡ç†é¡µé¢
* ç™»å½•çŠ¶æ€é€šè¿‡ localStorage æŒä¹…åŒ–ï¼Œåˆ·æ–°é¡µé¢ä¿æŒç™»å½•
* ç™»å½•é¡µé¢ï¼š`/login`
* åå°ç®¡ç†ï¼š`/admin`ï¼ˆæœªç™»å½•æ—¶è‡ªåŠ¨é‡å®šå‘åˆ° loginï¼‰

---

## æ•°æ®æ¨¡å‹è®¾è®¡

### Word æ•°æ®æ¨¡å‹ï¼ˆå”¯ä¸€æ ¸å¿ƒè¡¨ï¼‰

å­—æ®µè¯´æ˜ï¼š

* id: stringï¼ˆUUIDï¼‰
* word: string
  åŸå§‹è¯å½¢ï¼Œä¾‹å¦‚ coroutine
* normalized: string
  ç»Ÿä¸€æ ¼å¼ï¼Œç”¨äºæœç´¢ä¸å»é‡
* ipa: string
  IPA éŸ³æ ‡ï¼ˆé€šç”¨éŸ³æ ‡ï¼Œä¸åŒºåˆ†è‹±ç¾éŸ³ï¼‰
* audio_url: string
  å‘éŸ³éŸ³é¢‘æ–‡ä»¶çš„ R2 URL
* created_at: timestamp

---

## å‘éŸ³æ–¹æ¡ˆè®¾è®¡

å®ç°æ–¹å¼ï¼š

åœ¨æ·»åŠ æˆ–è€…å¯¼å…¥æ—¶è·å–æ ‡å‡†éŸ³æ ‡å’Œå‘éŸ³ï¼ŒéŸ³é¢‘ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨ï¼Œæ•°æ®åº“ä¿å­˜å¯¹åº” URL

* å‰ç«¯é€šè¿‡ URL è¯·æ±‚éŸ³é¢‘æ’­æ”¾
* å‘éŸ³ä¼˜å…ˆçº§ï¼ˆæŒ‰é¡ºåºå°è¯•ï¼‰ï¼š

  æœ‰é“è¯å…¸çœŸäººå‘éŸ³ï¼ˆé¦–é€‰ï¼‰- æ¥è‡ª Forvo ç­‰çœŸäººå‘éŸ³åº“
  * é€šè¿‡ `youdao/client.ts` è·å–
  * æ— éœ€ AI ç”Ÿæˆï¼Œæˆæœ¬ä½ï¼Œå‘éŸ³è‡ªç„¶
  * è¿”å› `audio_url_us`, `audio_url_uk` å®Œæ•´éŸ³é¢‘ URL

  æ¬§é™†è¯å…¸ - ä½œä¸ºæœ‰é“çš„è½®è¯¢å¤‡ç”¨
  * é€šè¿‡ `eudic/parser.ts` è·å– HTMLï¼Œè§£æéŸ³æ ‡å’Œ frdic éŸ³é¢‘å‚æ•°
  * è¾“å‡ºæ ¼å¼ä¸æœ‰é“ä¸€è‡´ï¼š`ipa_us`, `ipa_uk`, `audio_url_us`, `audio_url_uk`
  * éŸ³é¢‘ä½¿ç”¨ frdic TTS APIï¼Œæ— éœ€é¢å¤–ç­¾å

  MiniMax T2Aï¼ˆAI ç”Ÿæˆï¼‰
  * æ¨¡å‹ï¼šspeech-2.6-hd
  * æ”¯æŒå‚æ•°ï¼š
    * voice_id: é€‰æ‹©å‘éŸ³äºº
    * speed: è¯­é€Ÿ
    * vol: éŸ³é‡
    * pitch: éŸ³è°ƒ
    * emotion: æƒ…æ„Ÿï¼ˆå¯é€‰ï¼‰
  * pronunciation_dict: å¯ç”¨äºè‡ªå®šä¹‰è¯»éŸ³æ˜ å°„

* å¯¹è±¡å­˜å‚¨ï¼šCloudflare R2
  * MiniMax API è¿”å› hex ç¼–ç éŸ³é¢‘ï¼Œä¸Šä¼ å‰éœ€è§£ç ä¸ºäºŒè¿›åˆ¶ mp3 æ–‡ä»¶
  * R2 å­˜å‚¨çš„æ˜¯æ ‡å‡†éŸ³é¢‘æ–‡ä»¶ï¼ˆé hexï¼‰ï¼Œå‰ç«¯å¯ç›´æ¥é€šè¿‡ URL æ’­æ”¾
  * æ•°æ®åº“ä¿å­˜ R2 URL

* Provider è½®è¯¢æœºåˆ¶
  * `/api/phonetics` æ”¯æŒ `auto` æ¨¡å¼ï¼Œè‡ªåŠ¨åœ¨ youdao/eudic ä¹‹é—´è½®è¯¢
  * é¿å…å•ç‚¹ä¾èµ–å’Œé™æµ
  * å‰ç«¯é»˜è®¤ä½¿ç”¨ `auto`ï¼Œæ— éœ€æ„ŸçŸ¥å…·ä½“ provider

éŸ³æ ‡æ ¼å¼ï¼š

* ä½¿ç”¨ IPAï¼ˆå›½é™…éŸ³æ ‡ï¼‰
* æš‚æ—¶ä¸åŒºåˆ†è‹±éŸ³/ç¾éŸ³ï¼Œæä¾›é€šç”¨å‘éŸ³é€‰é¡¹

---

## æŠ€æœ¯é€‰å‹

å‰ç«¯ï¼ˆç”¨æˆ·ä¾§ï¼‰ï¼š

* ç›®æ ‡å¹³å°
* Web
  * SvelteKit 2.x + Svelte 5 + Vite 7 + Tailwind CSS 4

åå°ç®¡ç†ï¼š

* Web
  * SvelteKit 2.x + Svelte 5 + Tailwind CSS 4
  * å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
  * è¡¨å• + è¡¨æ ¼ä¸ºä¸»

åç«¯ï¼š

* SvelteKit API Routesï¼ˆServer-sideï¼‰
* éƒ¨ç½²å¹³å°ï¼šVercelï¼ˆadapter-vercelï¼‰

æ•°æ®åº“ï¼š Supabase PostgreSQL
å¯¹è±¡å­˜å‚¨ï¼ˆéŸ³é¢‘æ–‡ä»¶ï¼‰ï¼š Cloudflare R2

æœç´¢ï¼š

* Supabase å†…ç½®å…¨æ–‡æœç´¢ + GIN index
* è¯æ±‡é‡å°ï¼Œæ•°æ®åº“è¶³å¤Ÿ

AI æœåŠ¡ï¼š

* Moonshot AIï¼ˆKIMIï¼‰ï¼šéŸ³æ ‡ç”Ÿæˆ
* MiniMax T2Aï¼šéŸ³é¢‘ç”Ÿæˆ
* ç»Ÿä¸€é€šè¿‡ OpenAI SDK è°ƒç”¨ï¼ˆå…¼å®¹æ¥å£ï¼‰
* ä»…ç”¨äºæ‰¹é‡å¯¼å…¥æ—¶çš„éŸ³æ ‡å’ŒéŸ³é¢‘ç”Ÿæˆ
* éè¿è¡Œæ—¶ä¾èµ–ï¼ˆå‰ç«¯åªæ’­æ”¾éŸ³é¢‘ï¼‰

---

## é¡¹ç›®ä»£ç ç»“æ„

```tree
web-pronunciation/
â”œâ”€â”€ docs/                         # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ prd.md                    # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ audio_api.md              # éŸ³é¢‘ API å‚è€ƒ
â”‚   â”œâ”€â”€ kimi_text.md              # Kimi API å‚è€ƒ
â”‚   â””â”€â”€ minimax_text_api.md       # MiniMax API å‚è€ƒ
â”œâ”€â”€ supabase/                     # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ types/database.ts         # æ•°æ®åº“ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ config.toml               # Supabase é…ç½®
â”‚   â”œâ”€â”€ create_words_table.sql    # å»ºè¡¨è„šæœ¬
â”‚   â””â”€â”€ seed.sql                  # ç§å­æ•°æ®
â”œâ”€â”€ web/                          # Web åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib/                  # å…±äº«åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ llm/client.ts     # ç»Ÿä¸€ LLM å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ dictionary.ts     # å‘éŸ³æœåŠ¡ API
â”‚   â”‚   â”‚   â”œâ”€â”€ supabase.ts       # Supabase å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.svelte.ts    # è®¤è¯çŠ¶æ€ç®¡ç†ï¼ˆSvelte runeï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ types.ts          # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ routes/               # SvelteKit è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ +page.svelte      # å‰å°é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ +layout.svelte    # å…¨å±€å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ +layout.server.ts # æœåŠ¡ç«¯ session åŠ è½½
â”‚   â”‚   â”‚   â”œâ”€â”€ login/+page.svelte # ç®¡ç†å‘˜ç™»å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/+page.svelte # åå°ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ api/              # API è·¯ç”±
â”‚   â”‚   â”‚       â”œâ”€â”€ ipa/+server.ts   # IPA éŸ³æ ‡ç”Ÿæˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ tts/+server.ts   # TTS éŸ³é¢‘ç”Ÿæˆ
â”‚   â”‚   â”‚       â””â”€â”€ words/+server.ts # å•è¯ CRUD
â”‚   â”‚   â”œâ”€â”€ app.html              # HTML æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ app.d.ts              # ç±»å‹å£°æ˜
â”‚   â”œâ”€â”€ static/                   # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json              # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ svelte.config.js          # SvelteKit é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts            # Vite é…ç½®
â”‚   â””â”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ AGENTS.md                     # AI Agent å·¥ä½œæµ
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

---

## æ ¸å¿ƒæ¨¡å—è¯´æ˜

### LLM å®¢æˆ·ç«¯ (`src/lib/llm/client.ts`)

* ç»Ÿä¸€å°è£… Moonshot AI (Kimi) å’Œ MiniMax æ¨¡å‹è°ƒç”¨
* ä½¿ç”¨ OpenAI SDK å…¼å®¹æ¥å£
* æ”¯æŒåŠ¨æ€åˆ‡æ¢æ¨¡å‹
* å¯¼å‡º `generateIPA()` å’Œ `generateText()` æ–¹æ³•

### æœ‰é“è¯å…¸å®¢æˆ·ç«¯ (`src/lib/youdao/client.ts`)

* å°è£…æœ‰é“è¯å…¸ API
* è¿”å›éŸ³æ ‡ï¼ˆ`ipa_us`, `ipa_uk`ï¼‰å’ŒéŸ³é¢‘ URLï¼ˆ`audio_url_us`, `audio_url_uk`ï¼‰
* åŒ…å« sign ç­¾åè®¡ç®—

### æ¬§é™†è¯å…¸è§£æå™¨ (`src/lib/eudic/parser.ts`)

* ä»æ¬§è·¯è¯å…¸ HTML é¡µé¢è§£æéŸ³æ ‡å’ŒéŸ³é¢‘
* è¾“å‡ºæ ¼å¼ä¸æœ‰é“å®Œå…¨ä¸€è‡´ï¼Œä¾¿äºç»Ÿä¸€å¤„ç†
* éŸ³é¢‘ä½¿ç”¨ frdic TTS APIï¼ˆ`pi.frdic.com/api/v2/speech/speakweb`ï¼‰

### éŸ³æ ‡è·å– (`src/routes/api/phonetics/+server.ts`)

* æ”¯æŒ `youdao` / `eudic` / `auto` ä¸‰ç§ provider
* `auto` æ¨¡å¼ä¸‹è½®è¯¢åˆ‡æ¢ provider é¿å…å•ç‚¹ä¾èµ–å’Œé™æµ
* æ”¯æŒ LLM fallbackï¼šè¯å…¸æ— éŸ³æ ‡æ—¶è‡ªåŠ¨è°ƒç”¨ AI ç”Ÿæˆï¼ˆå¯å…³é—­ï¼‰
* è¿”å›å­—æ®µåŒ…å« `audio_url_us`, `audio_url_uk`, `audio_url`ï¼Œä¾› TTS å¤ç”¨

### è®¤è¯ç®¡ç† (`src/lib/auth.svelte.ts`)

* ä½¿ç”¨ Svelte 5 runes ç®¡ç†è®¤è¯çŠ¶æ€
* localStorage æŒä¹…åŒ–ç”¨æˆ·ç™»å½•çŠ¶æ€
* å¯¼å‡º `authState`ã€`signIn`ã€`signOut`ã€`initAuth` æ–¹æ³•

### API è·¯ç”±

* `GET /api/phonetics` - è·å–éŸ³æ ‡ï¼ˆæ”¯æŒ provider è½®è¯¢å’Œ LLM fallbackï¼‰
* `POST /api/ipa` - ç”Ÿæˆ IPA éŸ³æ ‡ï¼ˆæ”¯æŒé€‰æ‹©æ¨¡å‹ï¼‰
* `GET /api/ipa` - è·å–æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨
* `POST /api/tts` - ç”ŸæˆéŸ³é¢‘å¹¶ä¸Šä¼ åˆ° R2ï¼ˆæ”¯æŒ `existingPhonetics` å¤ç”¨éŸ³æ ‡æŸ¥è¯¢ç»“æœï¼Œå‡å°‘ API è°ƒç”¨ï¼‰
* `GET/POST/PUT/DELETE /api/words` - å•è¯ CRUD

### åå°ç®¡ç† (`src/routes/admin/+page.svelte`)

* è¯æ±‡åˆ—è¡¨ç®¡ç†ï¼ˆæœç´¢ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
* å¿«é€Ÿæ·»åŠ å•è¯ï¼ˆè‡ªåŠ¨è·å–éŸ³æ ‡+éŸ³é¢‘ï¼‰
* æ‰¹é‡å¯¼å…¥ï¼ˆæ¯è¡Œä¸€ä¸ªå•è¯ï¼‰
* è¡Œå†…ç¼–è¾‘ä¸éŸ³é¢‘æ’­æ”¾
* LLM æ¨¡å‹é€‰æ‹©å™¨
* LLM Fallback å¼€å…³ï¼šæ§åˆ¶è¯å…¸æ— éŸ³æ ‡æ—¶æ˜¯å¦ä½¿ç”¨ AI ç”Ÿæˆ
* ä¸€é”®éŸ³é¢‘é‡æ–°ç”Ÿæˆï¼ˆæµè§ˆæ¨¡å¼ä¸‹ç›´æ¥æ“ä½œï¼‰
* æ— éŸ³æ ‡æœ‰éŸ³é¢‘æ—¶æ˜¾ç¤º ğŸ”Šï¼šå³ä½¿éŸ³æ ‡ä¸ºç©ºï¼Œåªè¦æœ‰éŸ³é¢‘ä¹Ÿèƒ½æ’­æ”¾

### ç™»å½•é¡µé¢ (`src/routes/login/+page.svelte`)

* ç®¡ç†å‘˜ç™»å½•é¡µé¢
* ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°åå°

### æ•°æ®åº“è§¦å‘å™¨

* `generate_normalized()` - è‡ªåŠ¨ç”Ÿæˆ normalized å­—æ®µ
* `update_updated_at_column()` - è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³
* RLS ç­–ç•¥ï¼šå…¬å¼€è¯»å–ï¼Œè®¤è¯ç”¨æˆ·å¯å†™å…¥

---

## ä¾èµ–æ¸…å•

æ ¸å¿ƒä¾èµ–ï¼š

* `@sveltejs/kit` ^2.49.1 - SvelteKit æ¡†æ¶
* `svelte` ^5.45.6 - Svelte 5ï¼ˆä½¿ç”¨ runes å“åº”å¼ï¼‰
* `tailwindcss` ^4.1.17 - Tailwind CSS 4
* `@supabase/supabase-js` ^2.89.0 - Supabase å®¢æˆ·ç«¯
* `@supabase/ssr` ^0.5.2 - Supabase SSR æ”¯æŒ
* `@aws-sdk/client-s3` ^3.958.0 - R2 å­˜å‚¨ï¼ˆS3 å…¼å®¹ï¼‰
* `openai` ^6.15.0 - LLM è°ƒç”¨

---

## äº¤äº’è¯´æ˜ï¼ˆç®€è¿°ï¼‰

å‰å°ï¼š

* æ‰“å¼€å³æ˜¯è¯åˆ—è¡¨
* æœç´¢å³è¿‡æ»¤
* ç‚¹å‡»è¯å¯¹åº”çš„ IPA éŸ³æ ‡æˆ–æ’­æ”¾æŒ‰é’®å³å¯å‘éŸ³
* æ— éŸ³æ ‡æœ‰éŸ³é¢‘æ—¶æ˜¾ç¤º ğŸ”Šï¼Œå¯ç‚¹å‡»æ’­æ”¾

åå°äº¤äº’è®¾è®¡åŸåˆ™ï¼š

* é«˜é¢‘æ“ä½œä¼˜å…ˆï¼šéŸ³é¢‘é‡æ–°ç”Ÿæˆå’Œåˆ é™¤åœ¨æ“ä½œåˆ—ç›´æ¥å¯è§ï¼Œä¸€é”®å®Œæˆ
* ä½é¢‘æ“ä½œæ”¶çº³ï¼šç¼–è¾‘éœ€ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®è¿›å…¥ç‹¬ç«‹æ¨¡å¼
* æ“ä½œåˆ—å¸ƒå±€ï¼š
  * æµè§ˆæ¨¡å¼ï¼šğŸ”Š é‡æ–°ç”ŸæˆéŸ³é¢‘ | ç¼–è¾‘ | åˆ é™¤
  * ç¼–è¾‘æ¨¡å¼ï¼šä»…ä¿å­˜ | å–æ¶ˆï¼ˆæ— éŸ³é¢‘ç”Ÿæˆï¼‰
* ä¹è§‚æ›´æ–°ï¼šæ‰€æœ‰åˆ—è¡¨æ“ä½œï¼ˆæ·»åŠ /ç¼–è¾‘/æ‰¹é‡å¯¼å…¥/éŸ³é¢‘æ“ä½œï¼‰éƒ½é‡‡ç”¨ä¹è§‚æ›´æ–°ç­–ç•¥ï¼Œæ“ä½œåç«‹å³åœ¨æœ¬åœ°æ›´æ–° UIï¼Œæ— éœ€ç­‰å¾… API å“åº”ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨å›æ»šå¹¶æ˜¾ç¤º Toast æç¤º
* é›¶æ•™å­¦ï¼Œé›¶å¼•å¯¼ï¼Œé¢å‘ç®¡ç†å‘˜

---

## ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### ä¹è§‚æ›´æ–°ï¼ˆOptimistic UIï¼‰

ä¸ºä¿è¯æµç•…çš„äº¤äº’ä½“éªŒï¼Œæ‰€æœ‰åˆ—è¡¨æ“ä½œå‡é‡‡ç”¨ä¹è§‚æ›´æ–°ç­–ç•¥ï¼š

| æ“ä½œç±»å‹ | ä¹è§‚æ›´æ–°è¡Œä¸º | å¤±è´¥å›æ»š |
|----------|-------------|----------|
| å¿«é€Ÿæ·»åŠ  | ç«‹å³åœ¨åˆ—è¡¨é¡¶éƒ¨æ˜¾ç¤ºä¸´æ—¶è¯æ¡ | ç§»é™¤ä¸´æ—¶è¯æ¡ï¼ŒToast æç¤º |
| è¡Œå†…ç¼–è¾‘ | ç«‹å³æ›´æ–°æœ¬åœ°æ•°æ® | æ¢å¤åŸå§‹æ•°æ®ï¼ŒToast æç¤º |
| é‡æ–°ç”ŸæˆéŸ³é¢‘ | ç«‹å³æ¸…ç©ºéŸ³é¢‘æ˜¾ç¤º"ç”Ÿæˆä¸­" | æ¢å¤åŸéŸ³é¢‘ URLï¼ŒToast æç¤º |
| æ‰¹é‡å¯¼å…¥ | ç«‹å³åœ¨åˆ—è¡¨é¡¶éƒ¨æ˜¾ç¤ºæ‰€æœ‰è¯æ¡ | ç§»é™¤å¤±è´¥çš„è¯æ¡ï¼ŒToast æç¤º |
| URL ä¸Šä¼ éŸ³é¢‘ | ç«‹å³æ¸…ç©ºéŸ³é¢‘æ˜¾ç¤º"ä¸Šä¼ ä¸­" | æ¢å¤åŸéŸ³é¢‘ URLï¼ŒToast æç¤º |
| æ–‡ä»¶ä¸Šä¼ éŸ³é¢‘ | ç«‹å³æ¸…ç©ºéŸ³é¢‘æ˜¾ç¤º"ä¸Šä¼ ä¸­" | æ¢å¤åŸéŸ³é¢‘ URLï¼ŒToast æç¤º |

### Toast é€šçŸ¥

* æ“ä½œæˆåŠŸ/å¤±è´¥é€šè¿‡ Toast ç»„ä»¶æ˜¾ç¤ºç®€æ´æç¤º
* åˆ é™¤æ“ä½œæä¾›æ’¤é”€æŒ‰é’®ï¼ˆ5 ç§’å†…å¯æ’¤é”€ï¼‰
* Toast è‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸é˜»å¡ç”¨æˆ·æ“ä½œ

---

## é£é™©ä¸è¾¹ç•Œ

* AI éŸ³æ ‡å’ŒéŸ³é¢‘ç”Ÿæˆå¯èƒ½æœ‰æˆæœ¬ï¼Œéœ€è¦æ‰¹é‡å¤„ç†æ—¶æ³¨æ„é…é¢
* R2 å­˜å‚¨éœ€è¦é…ç½®æ­£ç¡®çš„è®¿é—®ç­–ç•¥
* è®¤è¯ä¾èµ– Supabase Authï¼Œéœ€ç¡®ä¿ç”¨æˆ·å·²åˆ›å»º
* æœ‰é“è¯å…¸ API ç­¾åé—®é¢˜ï¼šæœ‰é“ API çš„ `sign` å‚æ•°éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ï¼Œç­¾åå¤±æ•ˆæ—¶ä¼šè¿”å›é”™è¯¯è¯æ¡ï¼ˆå¦‚æŸ¥è¯¢ "Citrus" è¿”å› "eyetooth"ï¼‰ã€‚å½“å‰è§£å†³æ–¹æ¡ˆæ˜¯å®šæœŸæ›´æ–°ç­¾åï¼Œå‘ç°é—®é¢˜åéœ€è¦é‡æ–°æŠ“å–æœ‰æ•ˆçš„ç­¾åå€¼ã€‚

---

## åç»­æ‰©å±•ï¼ˆä¸çº³å…¥ MVPï¼‰

* é«˜é¢‘è¯æ¦œå•
* è‹±éŸ³/ç¾éŸ³å‘éŸ³é€‰é¡¹åˆ‡æ¢
* Forvo çœŸäººå‘éŸ³
* AI è‡ªåŠ¨å‘ç°æ–°æŠ€æœ¯è¯
* è‡ªå®šä¹‰å‘éŸ³æ˜ å°„ï¼ˆpronunciation_dictï¼‰

---

## æˆåŠŸæ ‡å‡†ï¼ˆMVPï¼‰

* ç®¡ç†å‘˜å¯åœ¨ 10 åˆ†é’Ÿå†…å¯¼å…¥ 1000 ä¸ªè¯
* ç”¨æˆ·å¯åœ¨ 3 ç§’å†…æ‰¾åˆ°ç›®æ ‡è¯
* å‘éŸ³ç‚¹å‡»æˆåŠŸç‡ > 95%
* æ•°æ®æ¨¡å‹åŠå¹´å†…æ— éœ€ç ´åæ€§ä¿®æ”¹

---

## API å‚è€ƒ

### TTS éŸ³é¢‘ç”Ÿæˆ API

æ¥å£: POST /api/tts

è¯·æ±‚å‚æ•°:

```json
{
  "word": "coroutine",
  "mode": "both" | "single",
  "accent": "us" | "uk",
  "provider": "youdao" | "frdic" | "minimax",
  "txt": "è‡ªå®šä¹‰æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰"
}
```

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
| ------ | ------ | ------ |
| word | æ˜¯ | è¦ç”Ÿæˆå‘éŸ³çš„å•è¯ |
| mode | å¦ | `both` - è·å–ä¸¤ç§å‘éŸ³ï¼Œ`single` - è·å–å•ä¸ªï¼ˆé»˜è®¤ï¼‰ |
| accent | å¦ | `us` æˆ– `uk`ï¼Œä»… mode=single æ—¶æœ‰æ•ˆ |
| provider | å¦ | ä¼˜å…ˆä½¿ç”¨çš„å‘éŸ³æºï¼Œé»˜è®¤ `youdao` |
| txt | å¦ | è‡ªå®šä¹‰å‘éŸ³æ–‡æœ¬ï¼Œé»˜è®¤ä½¿ç”¨ word |

å‘éŸ³æºä¼˜å…ˆçº§:

å½“æŒ‡å®š provider ä¸º `youdao` æ—¶ï¼Œå®é™…ä¼šæŒ‰ä»¥ä¸‹é¡ºåºå°è¯•ï¼š

1. æœ‰é“è¯å…¸ â†’ 2. Frdic â†’ 3. MiniMax

å“åº” - ä¸¤ç§å‘éŸ³ï¼ˆmode: bothï¼‰:

```json
{
  "success": true,
  "audio_url_us": "https://...",
  "audio_url_uk": "https://...",
  "audio_size_us": 12345,
  "audio_size_uk": 12345,
  "mode": "both",
  "provider": "youdao"
}
```

å“åº” - å•ä¸ªå‘éŸ³ï¼ˆmode: singleï¼‰:

```json
{
  "success": true,
  "audio_url": "https://...",
  "audio_size": 12345,
  "accent": "uk",
  "provider": "youdao",
  "mode": "single"
}
```

å“åº” - æ— æœ‰æ•ˆéŸ³æ ‡ï¼ˆç”Ÿé€ è¯ï¼‰:

```json
{
  "success": true,
  "word": "sukiui",
  "provider": "youdao",
  "mode": "none"
}
```

> å½“è¯å…¸æ— æœ‰æ•ˆéŸ³æ ‡æ•°æ®æ—¶ï¼ˆå¦‚ç”Ÿé€ è¯ "SukiUI"ï¼‰ï¼Œç›´æ¥è¿”å›ç©ºç»“æœï¼Œä¸æŠ¥é”™ä¹Ÿä¸å°è¯• AI ç”Ÿæˆã€‚

å“åº” - é”™è¯¯:

```json
{
  "error": "youdao audio: 500"
}
```

---

### MiniMax T2A éŸ³é¢‘ç”Ÿæˆ

```bash
curl --request POST \
  --url https://api.minimaxi.com/v1/t2a_v2 \
  --header 'Authorization: Bearer <token>' \
  --header 'Content-Type: application/json' \
  --data '{
    "model": "speech-2.6-hd",
    "text": "coroutine",
    "stream": false,
    "voice_setting": {
      "voice_id": "male-qn-qingse",
      "speed": 1,
      "vol": 1,
      "pitch": 0,
      "emotion": "neutral"
    },
    "audio_setting": {
      "sample_rate": 32000,
      "bitrate": 128000,
      "format": "mp3",
      "channel": 1
    },
    "subtitle_enable": false
  }'
```

å“åº”ï¼š

```json
{
  "data": {
    "audio": "<hexç¼–ç çš„audio>",
    "status": 2
  },
  "extra_info": {
    "audio_length": 9900,
    "audio_sample_rate": 32000,
    "audio_size": 160323,
    "bitrate": 128000,
    "word_count": 1,
    "usage_characters": 10,
    "audio_format": "mp3",
    "audio_channel": 1
  },
  "trace_id": "01b8bf9bb7433cc75c18eee6cfa8fe21",
  "base_resp": {
    "status_code": 0,
    "status_msg": "success"
  }
}
```

---

### Moonshot AIï¼ˆKIMIï¼‰éŸ³æ ‡ç”Ÿæˆ

```bash
curl https://api.moonshot.cn/v1/chat/completions \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer $MOONSHOT_API_KEY" \
    -d '{
        "model": "kimi-k2-turbo-preview",
        "messages": [
            {"role": "system", "content": "ä½ æ˜¯ Kimiï¼Œç”± Moonshot AI æä¾›çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹ã€‚ä½ æ“…é•¿æä¾›æŠ€æœ¯è¯æ±‡çš„ IPA å›½é™…éŸ³æ ‡ã€‚å¯¹äºç»™å®šçš„æŠ€æœ¯è¯æ±‡ï¼Œåªè¿”å› IPA éŸ³æ ‡ï¼Œä¸è¦æœ‰å…¶ä»–è§£é‡Šã€‚"},
            {"role": "user", "content": "coroutine"}
        ],
        "temperature": 0.3
    }'
```

å“åº”ï¼š

```json
{
    "id": "cmpl-04ea926191a14749b7f2c7a48a68abc6",
    "object": "chat.completion",
    "created": 1698999496,
    "model": "kimi-k2-turbo-preview",
    "choices": [
        {
            "index": 0,
            "message": {
                "role": "assistant",
                "content": "kÉ™ËˆruË.teÉªÊƒ"
            },
            "finish_reason": "stop"
        }
    ],
    "usage": {
        "prompt_tokens": 19,
        "completion_tokens": 21,
        "total_tokens": 40
    }
}
```
